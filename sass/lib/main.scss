/// @alias    restyle
@function -restyle--main($descriptors...) {
  $grammars: -restyle--grammars($descriptors...);
  @return -restyle--styles-from-grammar($grammars...);
}

/// @alias    restyle
@mixin -restyle--main($descriptors...) {
  $styles: -restyle--main($descriptors...);

  $grammars: -restyle--grammars($descriptors...);
  @each $grammar in $grammars {
    $type: map-get($grammar, type);
    $placeholder: map-get($-restyle--registered-pattern-placeholders, $type);
    @if ($placeholder) {
      @extend #{$placeholder} !optional;
    }
  }

  @include -restyle--styles($styles) {
    @content;
  }
}

/// @alias    restyle-diff
@function -restyle--diff($original, $other) {
  // make sure we're working with restyle maps...
  $original: if(type-of($original) == map, $original, -restyle--main(-restyle--cast-to-args($original)...));
  $other: if(type-of($other) == map, $other, -restyle--main(-restyle--cast-to-args($other)...));

  @return -restyle--styles-from-diff-js($original, $other);
}

/// @alias    restyle-diff
@mixin -restyle--diff($original, $other) {
  $styles: -restyle--diff($original, $other);

  @include -restyle--styles($styles) {
    @content;
  }
}
